# Registry について

Registry は、鍵マネージャーとカタログのグローバルなコンテナである。

Registry は、カタログ名を Catalogue にマップし、サポートされるキータイプを対応する KeyManager オブジェクトにマップする。KeyManager オブジェクトは与えられた鍵に対応するプリミティブをインスタンス化することができるか、あるいはサポートされるキータイプの新しい鍵を生成することができる。Registry は各プリミティブのために PrimitiveWrapper を持っている。そのため、鍵の集合に対応するプリミティブの集合を一つのプリミティブにラップすることができる。

全てのプリミティブの鍵マネージャーを一つのレジストリに保持することは (プリミティブごとに鍵マネージャーを分けて持つことよりも) 一つのものから合成されたプリミティブのモジュール構造を可能にする。例えば、AES-CTR-HMAC AEAD 暗号化は、IND-CPA 暗号化と MAC を行う。

レジストリは最初に初期化され、のちに、与えられた鍵あるいは鍵の集合のプリミティブをインスタンス化するために使われる。標準ではレジストリではなく、Config や KeysetHandle#getPrimitive() メソッドを使う。これらの中では、特定の鍵マネージャーや PrimitiveWrapper をレジストリに登録したり問い合わせたりしている。しかしながら、カスタムカタログやプリミティブ、鍵マネージャーの設定を可能にするためにレジストリは public である。

全ての鍵マネージャーでレジストリを初期化するには `TinkConfig.register()` とする。

AEAD の鍵マネージャーのみを登録するには `AeadConfig.register()` とする。

レジストリを初期化したあと、プリミティブを取得するには `KeysetHandle.getPrimitive()` を使う。

